= Usage

After installation, the CRD for this operator must be created:

    kubectl apply -f /etc/stackable/nifi-operator/crd/nificluster.crd.yaml

To create a single node Apache NiFi (v1.13.2) cluster with Prometheus metrics exposed on port 8428 and the WebUi on port 10000. As of now only one instance per node is supported:


    cat <<EOF | kubectl apply -f -
    apiVersion: nifi.stackable.tech/v1alpha1
    kind: NifiCluster
    metadata:
      name: simple-nificluster
    spec:
      metricsPort: 8428
      version: "1.13.2"
      zookeeperReference:
        name: simple
        namespace: default
        chroot: /nifi
      nodes:
        roleGroups:
          default:
            selector:
              matchLabels:
                kubernetes.io/os: linux
            replicas: 1
            config:
              httpPort: 10000
              protocolPort: 10443
              loadBalancePort: 6342
    EOF

